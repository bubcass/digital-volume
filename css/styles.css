/* css/styles.css */
/* =========================================
   Edition Mode — print-matched web edition
   (screen + print + Vivliostyle)
   ========================================= */

:root{
  --surround: #e6e6e6;
  --page: #ffffff;
  --ink: #000000;
  --muted: #444444;
  --hairline: rgba(0,0,0,.18);

  --serif: "Times New Roman", Times, serif;
  --sans: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;

  --base: 18px;
  --leading: 1.56;
  --measure: 78ch;

  --pad_y: 56px;
  --pad_x: 68px;

  --harp-width: 150px;
  --harp-nudge-y: 6px;

  --para-indent: 1.6em;

  --locator-color: rgba(0,0,0,.42);
  --locator-size: .72rem;
  --locator-offset: 6.2em;

  --copied-bg: #ffffff;
  --copied-border: rgba(0,0,0,.22);
  --copied-text: rgba(0,0,0,.75);

  --print-hf-size: 13pt;

  /* Switch (ARIA) */
  --switch-h: 26px;
  --switch-w: 48px;
  --switch-pad: 2px;
  --switch-track: rgba(0,0,0,.22);
  --switch-track-on: rgba(0,0,0,.60);
  --switch-thumb: #fff;
  --switch-thumb-border: rgba(0,0,0,.22);
}

html{ font-size: var(--base); }

body{
  margin: 0;
  background: var(--surround);
  color: var(--ink);
  font-family: var(--serif);
  line-height: var(--leading);
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
}

/* -----------------------------------------
   Links & focus
----------------------------------------- */

a{
  color: inherit;
  text-decoration-thickness: 1px;
  text-underline-offset: .12em;
}
a:hover{ text-decoration-thickness: 2px; }
a:focus-visible{
  outline: 3px solid currentColor;
  outline-offset: 3px;
  border-radius: 6px;
}

/* Reduce motion for people who request it */
@media (prefers-reduced-motion: reduce){
  *{ scroll-behavior: auto !important; }
}

/* Skip link */
.skip{
  position: absolute;
  left: -9999px;
  top: auto;
  width: 1px;
  height: 1px;
  overflow: hidden;
}
.skip:focus{
  left: 12px;
  top: 12px;
  width: auto;
  height: auto;
  padding: 10px 12px;
  background: var(--page);
  border: 1px solid var(--hairline);
  border-radius: 8px;
  z-index: 9999;
}

/* -----------------------------------------
   Page frame
----------------------------------------- */

.edition{
  max-width: 980px;
  margin: 24px auto;
  padding: 0 16px;
}

.edition__sheet{
  position: relative;
  background: var(--page);
  border: 1px solid var(--hairline);
  box-shadow: 0 2px 10px rgba(0,0,0,.10);
  padding: var(--pad_y) var(--pad_x);
}

/* -----------------------------------------
   Top header: Volume — Harp — Date
----------------------------------------- */

.tophead{
  display: grid;
  grid-template-columns: 1fr auto 1fr;
  align-items: baseline;
  column-gap: 24px;
  margin: 0 0 28px;
}

.tophead__volno{
  justify-self: start;
  text-align: left;
  font-weight: 700;
  font-size: 1.05rem;
  letter-spacing: .02em;
}

.tophead__date{
  justify-self: end;
  text-align: right;
  font-weight: 700;
  font-size: 1.05rem;
  letter-spacing: .02em;
}

.tophead__harp{
  justify-self: center;
  display: block;
  width: var(--harp-width);
  height: auto;
  transform: translateY(var(--harp-nudge-y));
}

/* Responsive: stack on narrow screens */
@media (max-width: 640px){
  .tophead{
    grid-template-columns: 1fr;
    row-gap: 14px;
    justify-items: center;
    align-items: center;
  }
  .tophead__volno,
  .tophead__date{
    justify-self: center;
    text-align: center;
  }
  .tophead__harp{ transform: none; }
}

/* -----------------------------------------
   Title block
----------------------------------------- */

.masthead{ margin: 0 0 32px; }

.smallcaps{
  font-variant: small-caps;
  letter-spacing: .08em;
}

.titlepage{ text-align: center; }

.titlepage__line{
  font-size: 1.28rem;
  margin: 0;
}

.titlepage__house{
  margin: 10px 0 14px;
  font-size: 2.65rem;
  letter-spacing: .06em;
  font-weight: 700;
}

.titlepage__status{
  margin-top: 18px;
  font-size: 1.05rem;
}

.status__em{ font-style: italic; }

.edition-note{
  font-family: var(--sans);
  font-size: .92rem;
  color: var(--muted);
  margin: 22px auto 0;
  max-width: 74ch;
}

/* -----------------------------------------
   Loader UI (screen only)
   (this is your in-title "Select a date" block)
----------------------------------------- */

.loader{
  margin: 20px auto 0;
  max-width: 520px;
  text-align: left;
  padding-top: 10px;
  border-top: 1px solid var(--hairline);
}

.loader__label{
  display: block;
  font-family: var(--sans);
  font-size: .86rem;
  color: rgba(0,0,0,.70);
  margin-bottom: .35rem;
  letter-spacing: .02em;
}

.loader__row{
  display: flex;
  gap: 10px;
  align-items: center;
}

.loader__input{
  flex: 1;
  font: inherit;
  font-family: var(--sans);
  font-size: .95rem;
  padding: 6px 8px;
  border-radius: 2px;
  border: 1px solid rgba(0,0,0,.20);
  background: #fff;
}

.loader__btn{
  font: inherit;
  font-family: var(--sans);
  font-size: .95rem;
  padding: 6px 10px;
  border-radius: 2px;
  border: 1px solid rgba(0,0,0,.20);
  background: transparent;
  cursor: pointer;
}

.loader__btn:hover{ border-color: rgba(0,0,0,.35); }

.loader__btn:focus-visible,
.loader__input:focus-visible{
  outline: 3px solid currentColor;
  outline-offset: 3px;
  border-radius: 6px;
}

.loader__hint{
  margin: .5rem 0 0;
  font-family: var(--sans);
  font-size: .82rem;
  color: rgba(0,0,0,.65);
}

/* -----------------------------------------
   Date picker bar (screen)
   Print-ish, understated, aligns with title page
----------------------------------------- */

.datebar{
  max-width: var(--measure);
  margin: 0 auto 18px;
  padding: 10px 0 14px;
  border-bottom: 1px solid var(--hairline);

  display: flex;
  align-items: center;
  justify-content: flex-start;
  gap: 12px;
  flex-wrap: wrap;
}

.datebar__label{
  font-family: var(--sans);
  font-variant: small-caps;
  letter-spacing: .08em;
  font-weight: 700;
  color: rgba(0,0,0,.75);
  white-space: nowrap;
}

.datebar input[type="date"]{
  font: inherit;
  font-family: var(--serif);
  font-size: 1rem;
  line-height: 1.2;

  background: transparent;
  border: 0;
  border-bottom: 1px solid rgba(0,0,0,.22);
  border-radius: 0;

  padding: 4px 2px 3px;
  color: var(--ink);
  min-width: 13.5rem;
}

.datebar input[type="date"]:focus-visible{
  outline: 3px solid currentColor;
  outline-offset: 4px;
  border-radius: 6px;
}

.datebar button{
  font: inherit;
  font-family: var(--sans);
  font-weight: 700;
  letter-spacing: .04em;

  background: transparent;
  border: 1px solid rgba(0,0,0,.22);
  border-radius: 2px;

  padding: 6px 10px;
  cursor: pointer;
  color: rgba(0,0,0,.80);
}

.datebar button:hover{ border-color: rgba(0,0,0,.40); }

.datebar button:focus-visible{
  outline: 3px solid currentColor;
  outline-offset: 4px;
  border-radius: 6px;
}

/* Slightly nicer on narrow screens */
@media (max-width: 640px){
  .datebar{ gap: 10px; }
  .datebar input[type="date"]{
    flex: 1;
    min-width: 0;
  }
}

/* -----------------------------------------
   ARIA Switch (WAI-ARIA APG style)
   Expected markup:
   <button id="modeSwitch" role="switch" aria-checked="false" class="switch">
     <span class="switch__label">Web</span>
     <span class="switch__track"><span class="switch__thumb"></span></span>
     <span class="switch__label">Edition</span>
   </button>
----------------------------------------- */

.switch{
  display: inline-flex;
  align-items: center;
  gap: 10px;

  background: transparent;
  border: 0;
  padding: 0;
  margin-left: auto; /* pushes switch to the right if there's space */
  cursor: pointer;

  font-family: var(--sans);
  color: rgba(0,0,0,.78);
}

.switch:focus-visible{
  outline: 3px solid currentColor;
  outline-offset: 6px;
  border-radius: 10px;
}

/* labels */
.switch__label{
  font-size: .86rem;
  letter-spacing: .02em;
  white-space: nowrap;
  opacity: .75;
}

/* track */
.switch__track{
  position: relative;
  width: var(--switch-w);
  height: var(--switch-h);
  border-radius: 999px;
  border: 1px solid var(--switch-track);
  background: transparent;
  display: inline-flex;
  align-items: center;
  padding: var(--switch-pad);
}

/* thumb */
.switch__thumb{
  width: calc(var(--switch-h) - (var(--switch-pad) * 2) - 2px);
  height: calc(var(--switch-h) - (var(--switch-pad) * 2) - 2px);
  border-radius: 999px;
  background: var(--switch-thumb);
  border: 1px solid var(--switch-thumb-border);
  transform: translateX(0);
  transition: transform 160ms ease-in-out, border-color 160ms ease-in-out;
}

/* ON state (aria-checked="true") */
.switch[aria-checked="true"] .switch__track{
  border-color: var(--switch-track-on);
}

.switch[aria-checked="true"] .switch__thumb{
  transform: translateX(calc(var(--switch-w) - var(--switch-h)));
  border-color: rgba(0,0,0,.35);
}

/* emphasis: make the active side label stronger */
.switch[aria-checked="false"] .switch__label:first-child{ opacity: 1; font-weight: 700; }
.switch[aria-checked="false"] .switch__label:last-child{ opacity: .55; font-weight: 400; }

.switch[aria-checked="true"] .switch__label:first-child{ opacity: .55; font-weight: 400; }
.switch[aria-checked="true"] .switch__label:last-child{ opacity: 1; font-weight: 700; }

/* keep the switch from squashing too hard on tiny screens */
@media (max-width: 520px){
  .switch{ margin-left: 0; }
}

/* -----------------------------------------
   Body text
----------------------------------------- */

.reader{
  max-width: var(--measure);
  margin: 0 auto;
}

.section{ margin: 1.5rem 0; }

.section__heading{
  text-align: center;
  font-weight: 700;
  font-size: 1.18rem;
  margin: 1.7rem 0 1.05rem;
}

.summary{ margin: .7rem 0 1.0rem; }
.summary.center{ text-align: center; }
.summary--italic{ font-style: italic; }
em{ font-style: italic; }

/* Centres only the "The Dáil divided: Tá, …" line */
.summary--divisionline{ text-align: center; }

/* -----------------------------------------
   Historical Columns (≤2012) markers
----------------------------------------- */

.col-marker__wrap{
  margin: 0 0 .6rem;
  text-align: right;
}

.col-marker{
  font-family: var(--sans);
  font-size: .78rem;
  color: rgba(0,0,0,.55);
  border: 1px solid rgba(0,0,0,.16);
  padding: 2px 8px;
  border-radius: 2px;
  display: inline-block;
}

/* -----------------------------------------
   Table of Contents (Hansard-like)
----------------------------------------- */

.toc{
  margin: 0 auto 1.2rem;
  padding: 0 0 1.0rem;
  border-bottom: 1px solid var(--hairline);
}

.toc__header{
  display: flex;
  align-items: baseline;
  justify-content: flex-start;
  gap: 12px;
  flex-wrap: wrap;
}

.toc__toggle{
  font: inherit;
  font-family: var(--sans);
  font-weight: 700;
  letter-spacing: .08em;
  text-transform: uppercase;

  background: transparent;
  border: 0;
  padding: 0;
  cursor: pointer;
  color: rgba(0,0,0,.75);
}

.toc__toggle:hover{
  text-decoration: underline;
  text-decoration-thickness: 2px;
  text-underline-offset: .18em;
}

.toc__toggle:focus-visible{
  outline: 3px solid currentColor;
  outline-offset: 4px;
  border-radius: 6px;
}

.toc__panel{ margin-top: .8rem; }

.toc__skip{
  display: inline-block;
  font-family: var(--sans);
  font-size: .86rem;
  color: var(--muted);
  text-decoration: none;
  border-bottom: 1px solid rgba(0,0,0,.18);
  margin-bottom: .65rem;
}

.toc__skip:hover{
  border-bottom-color: rgba(0,0,0,.45);
  border-bottom-width: 2px;
}

.toc__list{
  list-style: none;
  padding: 0;
  margin: 0;
}

.toc__item{ margin: .18rem 0; }

.toc__link{
  display: inline-block;
  text-decoration: none;
  border-bottom: 1px solid rgba(0,0,0,.18);
}

.toc__link:hover{
  border-bottom-color: rgba(0,0,0,.45);
  border-bottom-width: 2px;
}

/* Indentation by depth */
.toc__item--d2{ padding-left: 0; }
.toc__item--d3{ padding-left: 1.0rem; }
.toc__item--d4{ padding-left: 2.0rem; }
.toc__item--d5{ padding-left: 3.0rem; }
.toc__item--d6{ padding-left: 4.0rem; }

/* Column jump UI (only appears when JS adds it) */
.col-jump{
  margin: .4rem 0 .9rem;
  padding: .45rem .55rem;
  border: 1px solid rgba(0,0,0,.14);
  border-radius: 2px;
}

.col-jump__label{
  display: block;
  font-family: var(--sans);
  font-size: .82rem;
  color: rgba(0,0,0,.70);
  margin-bottom: .35rem;
}

.col-jump__row{
  display: flex;
  gap: 8px;
  align-items: center;
}

.col-jump__input{
  flex: 1;
  font: inherit;
  font-family: var(--sans);
  font-size: .95rem;
  padding: 6px 8px;
  border-radius: 2px;
  border: 1px solid rgba(0,0,0,.20);
}

.col-jump__btn{
  font: inherit;
  font-family: var(--sans);
  font-size: .95rem;
  padding: 6px 10px;
  border-radius: 2px;
  border: 1px solid rgba(0,0,0,.20);
  background: transparent;
  cursor: pointer;
}

.col-jump__btn:hover{ border-color: rgba(0,0,0,.35); }

/* -----------------------------------------
   Speech blocks + citation UI
----------------------------------------- */

.speech{
  margin: 1.2rem 0;
  position: relative;
}

/* Speech number in the margin (screen only) — fade in/out on hover/focus */
.speech[data-spknum]::before{
  content: "Speech " attr(data-spknum);
  position: absolute;
  left: calc(-1 * var(--locator-offset));
  top: 0;
  font-family: var(--sans);
  font-size: var(--locator-size);
  color: var(--locator-color);
  letter-spacing: .02em;
  white-space: nowrap;
  line-height: 1.2;

  opacity: 0;
  transition: opacity 160ms ease-in-out;
}

.speech:hover::before,
.speech:focus-visible::before,
.speech[data-copied="true"]::before{
  opacity: 1;
}

/* Hover affordance (subtle) */
.speech[id][data-speaker]{ cursor: copy; }
.speech[id][data-speaker]:hover{
  outline: 1px solid rgba(0,0,0,.18);
  outline-offset: 8px;
  border-radius: 2px;
}

/* Copied state: stronger outline + badge */
.speech[data-copied="true"]{
  outline: 2px solid rgba(0,0,0,.35);
  outline-offset: 8px;
  border-radius: 2px;
}

.speech[data-copied="true"]::after{
  content: "Copied citation";
  position: absolute;
  left: calc(-1 * var(--locator-offset));
  top: 1.35em;
  font-family: var(--sans);
  font-size: .72rem;
  color: var(--copied-text);
  border: 1px solid var(--copied-border);
  padding: 2px 7px;
  border-radius: 10px;
  background: var(--copied-bg);
  white-space: nowrap;
  opacity: 1;
  transition: opacity 160ms ease-in-out;
}

/* Hide locators & badge on narrow screens */
@media (max-width: 760px){
  .speech[data-spknum]::before{ display: none; }
  .speech[data-copied="true"]::after{ display: none; }
}

/* Keyboard focus visibility on speeches */
.speech:focus-visible{
  outline: 3px solid rgba(0,0,0,.55);
  outline-offset: 8px;
  border-radius: 2px;
}

.speaker{ font-weight: 700; }

/* Paragraphs */
.speech__p{
  margin: 0 0 .95rem;
  hyphens: auto;
  text-indent: 0;
}

/* Indent every paragraph after the first */
.speech__p:not(.speech__p--first){
  text-indent: var(--para-indent);
}

/* Verse / quoted indentation helpers */
.speech__p.indent_1{ margin-left: 2.2em; margin-bottom: .55rem; }
.speech__p.indent_2{ margin-left: 3.8em; margin-bottom: .55rem; }
.speech__p.indent_3{ margin-left: 5.4em; margin-bottom: .55rem; }

.speech__p.indent_1,
.speech__p.indent_2,
.speech__p.indent_3{
  text-indent: 0;
  hyphens: none;
}

/* -----------------------------------------
   Page markers (hidden on screen)
----------------------------------------- */
.page-marker{ display: none; }

/* -----------------------------------------
   Running strings (Vivliostyle) — hidden
----------------------------------------- */
.running-strings{
  position: absolute;
  left: -9999px;
  top: auto;
  width: 1px;
  height: 1px;
  overflow: hidden;
}

/* Capture running header strings */
#runningChamber{ string-set: chamber content(text); }
#runningDate{ string-set: docdate content(text); }

/* -----------------------------------------
   Footer (screen)
----------------------------------------- */

.footer{ margin-top: 28px; }

.footer__rule{
  border-top: 1px solid var(--hairline);
  margin-top: 22px;
}

.footer__text{
  font-family: var(--sans);
  color: var(--muted);
  font-size: .9rem;
  margin: 12px 0 0;
  text-align: center;
}

/* -----------------------------------------
   Division table (Tá / Níl / Staon)
----------------------------------------- */

.division__table{
  width: 100%;
  table-layout: fixed;
  border-collapse: collapse;
  margin: 1rem 0;
  font-size: 0.95rem;
}

.division__table th,
.division__table td{
  vertical-align: top;
  padding: 0.25rem 0.5rem;
  overflow-wrap: anywhere;
  word-break: normal;
}

.division__table thead th{
  border-bottom: 1px solid #000;
  font-weight: 700;
}

.division__table tbody td{
  border-bottom: 1px solid rgba(0,0,0,0.1);
}

.division__table th + th,
.division__table td + td{
  border-left: 1px solid rgba(0,0,0,0.12);
}

/* -----------------------------------------
   Print (Vivliostyle / paged media)
----------------------------------------- */

@media print{
  html{ font-size: 12pt; }

  body{
    background: #fff;
    color: #000;
    line-height: 1.45;
  }

  .edition{ max-width: none; margin: 0; padding: 0; }
  .edition__sheet{ border: 0; box-shadow: none; padding: 0; }

  /* Title page unpaired */
  .titlepage--unpaired{ break-after: page; }

  /* Force debate to start on a fresh page after the Table of Contents */
  #toc{
    break-after: page;
    page-break-after: always;
  }

  /* Avoid ugly breaks after headings */
  h2, .section__heading{ break-after: avoid; }

  /* Let content flow naturally */
  .speech{ break-inside: auto; orphans: 2; widows: 2; }
  .speech__p{ orphans: 2; widows: 2; }
  .page-marker{ display: none !important; break-before: auto !important; }

  /* Don’t print on-screen citation UI */
  .speech[data-spknum]::before{ display: none !important; }
  .speech[data-copied="true"]{ outline: none !important; }
  .speech[data-copied="true"]::after{ display: none !important; }
  .speech[id][data-speaker]{ cursor: auto; }
  .speech[id][data-speaker]:hover{ outline: none !important; }

  /* Hide the web-only controls */
  .loader{ display: none !important; }
  .datebar{ display: none !important; }

  a{ text-decoration: none; }

  /* Always show the TOC panel, hide toggle label */
  .toc__toggle{ display: none !important; }
  .toc__panel[hidden]{ display: block !important; }
}

/* -----------------------------------------
   Back to Top Button
----------------------------------------- */

.backtotop{
  position: fixed;
  right: 22px;
  bottom: 28px;

  width: 44px;
  height: 44px;
  border-radius: 999px;

  border: 1px solid rgba(0,0,0,.18);
  background: #fff;
  color: rgba(0,0,0,.75);

  font-family: var(--sans);
  font-size: 1.2rem;
  font-weight: 700;

  cursor: pointer;
  box-shadow: 0 6px 18px rgba(0,0,0,.12);

  opacity: 0;
  pointer-events: none;
  transform: translateY(6px);
  transition: opacity 180ms ease, transform 180ms ease;
}

.backtotop--visible{
  opacity: 1;
  pointer-events: auto;
  transform: translateY(0);
}

.backtotop:hover{
  background: rgba(0,0,0,.06);
}

.backtotop:focus-visible{
  outline: 3px solid currentColor;
  outline-offset: 4px;
}

/* Hide in print */
@media print{
  .backtotop{ display:none !important; }
}

/* Page size + margins + margin boxes */
@page{
  margin: 25mm 20mm 25mm 20mm;

  @bottom-center{
    content: counter(page);
    font-size: var(--print-hf-size);
  }
}

@page :left{
  @top-left{
    content: string(chamber);
    font-style: italic;
    font-size: var(--print-hf-size);
  }
}

@page :right{
  @top-right{
    content: string(docdate);
    font-size: var(--print-hf-size);
  }
}